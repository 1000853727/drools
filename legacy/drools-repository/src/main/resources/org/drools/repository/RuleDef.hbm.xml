<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">


<hibernate-mapping>

    <class name="org.drools.repository.RuleDef" 
    	table="RULE_DEFINITIONS" 
		select-before-update="true" optimistic-lock="version">
        <id name="id" column="RULE_ID">
            <generator class="native"/>
        </id>
        
        <version name="lockingVersion" column="LOCKING_VERSION" />
        
	    <property name="name" column="RULE_NAME" length="64" index="true" />
	    <property name="versionNumber" column="VERSION_NUMBER" />
		<property name="historicalId" column="HISTORICAL_ID"/>        
        
		<property name="content" type="text" column="RULE_CONTENT" />   
		<property name="status" column="STATUS" length="32" />	
		<property name="checkedOut" column="CHECKED_OUT" />	
		<property name="checkedOutBy" column="CHECKED_OUT_BY" length="64"/>	
		<property name="versionComment" column="VERSION_COMMENT" length="128"/>
		<property name="documentation" column="DOCUMENTATION" type="text"/>		
		<property name="effectiveDate" column="EFFECTIVE_DATE" />		
		<property name="expiryDate" column="EXPIRY_DATE"/>					
		<property name="historicalRecord" column="HISTORICAL_RECORD_FLAG"/>
		<property name="owningRuleSetName" column="OWNING_RULESET_NAME" />
 		<property name="lastSavedByUser" column="LAST_SAVED_USER" /> 		 		
 		<property name="lastSavedDate" column="LAST_SAVED_DATE" />		
		
		<set name="tags" table="RULE_TAGS" lazy="false" cascade="all" optimistic-lock="false">
		    <key column="RULE_ID"/>
		    <one-to-many class="org.drools.repository.Tag"  />
		</set>       
		
		<component name="metaData">
			<property name="title" />
			<property name="creator" />
			<property name="subject" />
			<property name="description" />
			<property name="publisher" />
			<property name="contributor" />
			<property name="dateCreated" />
			<property name="format" />
			<property name="source" />
			<property name="language" />
			<property name="relation" />
			<property name="coverage" />
			<property name="rights" />
		</component>		 
 
		<filter name="historyFilter" condition=":viewHistory = HISTORICAL_RECORD_FLAG" />
    </class>

	<filter-def name="historyFilter">
		<filter-param name="viewHistory" type="boolean" />
	</filter-def>      
   

</hibernate-mapping>        