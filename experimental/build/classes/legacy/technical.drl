package org.acme.insurance

rule "DemoRule"
	salience 10
	dialect "mvel"
	when
	d : Driver( age > 65 )
	then
	insert(new Rejection(" too old "));
end

rule "Approve policy affirmative"
	salience 100 #this can short circuit any processing
	when
		a : Approve()
		p : Policy()
	then
		p.setApproved(true);
		System.out.println("APPROVED: " 
								+ a.getReason());
		drools.halt();
end

rule "Approve if not rejected"
	salience -100 #approve if there are no objections
	when
		not Rejection() 		
		p : Policy(approved == false)
	then
		System.out.println("APPROVED: due to no objections."); 
		p.setApproved(true);
end

rule "Reject application"
	salience 100 #this can short circuit any other processing
	when
		r : Rejection()
		d : Driver()
		p : Policy()
	then
		System.out.println("REJECTED: " + r.getReason());
		p.setApproved(false);
		retract(d); #effectively halts the rules
end
